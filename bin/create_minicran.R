create_minicran <- function(minicran_path) {
  cran_server <- c(CRAN = "http://cran.rstudio.com")

  pkgs <- c(
    "R6",
    "Rcpp",
    "askpass",
    "assertthat",
    "backports",
    "brew",
    "callr",
    "cellranger",
    "cli",
    "clipr",
    "clisymbols",
    "commonmark",
    "covr",
    "crayon",
    "curl",
    "desc",
    "devtools",
    "digest",
    "ellipsis",
    "fansi",
    "fs",
    "getopt",
    "gh",
    "git2r",
    "glue",
    "hms",
    "httr",
    "ini",
    "jsonlite",
    "lazyeval",
    "magrittr",
    "memoise",
    "mime",
    "moments",
    "openssl",
    "optparse",
    "pillar",
    "pkgbuild",
    "pkgconfig",
    "pkgload",
    "praise",
    "prettyunits",
    "processx",
    "progress",
    "ps",
    "purrr",
    "rcmdcheck",
    "readstata13",
    "readxl",
    "rematch",
    "remotes",
    "rex",
    "rlang",
    "roxygen2",
    "rprojroot",
    "rstudioapi",
    "sessioninfo",
    "stringi",
    "stringr",
    "sys",
    "testthat",
    "tibble",
    "usethis",
    "utf8",
    "vctrs",
    "whisker",
    "withr",
    "xml2",
    "xopen",
    "yaml",
    "zeallot"
  )
  pkgList <-
    pkgDep(pkgs,
      repos = cran_server,
      type = "source",
      suggests = FALSE)
  dir.create(pth <- file.path(minicran_path))
  makeRepo(
    pkgList,
    path = pth,
    repos = cran_server,
    type = c("source", "win.binary"),
    Rversion = "3.5"
  )
}
